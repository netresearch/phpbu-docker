{
  "$schema": "https://json.schemastore.org/github-branch-protection",
  "_comment": "Apply with: gh api repos/{owner}/{repo}/branches/main/protection -X PUT --input .github/branch-protection.json",
  "required_status_checks": {
    "strict": true,
    "contexts": [
      "lint",
      "build",
      "smoke-test",
      "structure-test",
      "trivy",
      "gitleaks"
    ]
  },
  "enforce_admins": false,
  "required_pull_request_reviews": {
    "dismiss_stale_reviews": true,
    "require_code_owner_reviews": true,
    "required_approving_review_count": 1,
    "require_last_push_approval": true
  },
  "restrictions": null,
  "required_linear_history": true,
  "allow_force_pushes": false,
  "allow_deletions": false,
  "block_creations": false,
  "required_conversation_resolution": true,
  "required_signatures": false
}
